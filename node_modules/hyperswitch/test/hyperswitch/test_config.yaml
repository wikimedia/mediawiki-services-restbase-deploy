spec_root: &spec_root
  title: "The test service spec root"
  # Some more general RESTBase info
  paths:
    /service/recursive/{title}:
      get:
        x-request-handler:
          - get_from_api:
              request:
                uri: /service/recursive/{title}
        x-monitor: false

    /service/head/{title}:
      get:
        x-request-handler:
          - get_from_api:
              return:
                status: 200
                headers:
                  test: 'test'
                body: 'some_body'
        x-monitor: false

    /service/validation/{number}:
      get:
        parameters:
          - name: number
            in: path
            type: integer
            required: true
        x-request-handler:
          - get_from_api:
              return:
                status: 200
                headers:
                  test: 'test'
                body: 'some_body'
        x-monitor: false

    /service/no_response:
      get:
        x-request-handler:
          - get_from_api:
              return:
                status: 400
        x-monitor: false

    /service/gzip_response:
      get:
        x-request-handler:
          - get_from_api:
              return:
                status: 200
                headers:
                  content-type: text/plain
                  content-length: 200
                body: 'abcdef'
        x-monitor: false

    /service/json_body:
      post:
        x-request-handler:
          - get_from_api:
              return:
                status: 200
                headers:
                  content-type: 'application/json'
                body:
                  result: '{$.request.body.field}'
        x-monitor: false

    /service/hop_to_hop:
      get:
        x-request-handler:
          - return_result:
              return:
                status: 200
                headers:
                  transfer-encoding: chunked
                  public: GET
                  content-encoding: gzip
                body: 'test'


# Finally, a standard service-runner config.
info:
  name: hyperswitch

services:
  - name: test_service
    module: ./lib/server
    conf:
      port: 12345
      spec: *spec_root
      salt: secret
      default_page_size: 1
      user_agent: HyperSwitch-testsuite

